<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <title>ESCO-NECTADOS</title>
</head>

<body class="w-full bg-principal_2">
  <header>
    <nav class="m-auto bg-principal text-base font-bold text-azul drop-shadow-md">
      <div class="relative flex items-center justify-between custom:mx-7">
        <!-- Logo -->
        <div class="flex items-center">
          <img src="/logo.png" alt="Logo" class="h-16 w-auto" />
          <span class="font-bold">ESCO-NECTADOS</span>
        </div>

        <ul id="menu"
          class=" absolute top-16 hidden w-full flex-col justify-between justify-items-center gap-8 bg-principal py-6 custom:relative custom:top-0 custom:flex custom:w-auto custom:flex-row custom:items-center custom:gap-6">
          <li>
            <a href="index.html" class="hover:text-verde">INICIO</a>
          </li>
          <li>
            <a href="empleos.html" class="hover:text-verde">EMPLEOS</a>
          </li>
          <li>
            <a href="tips.html" class="hover:text-verde">TIPS Y CONSEJOS</a>
          </li>
          <li>
            <a href="certificaciones.html" class="hover:text-verde">CERTIFICACIONES</a>
          </li>
          <li>
            <a href="servicioSocial.html" class="hover:text-verde">SERVICIO SOCIAL</a>
          </li>
          <li>
            <a href="sobreNosotros.html" class="hover:text-verde">SOBRE NOSOTROS</a>
          </li>
        </ul>

        <!-- Botón Iniciar Sesión e icono de menú -->
        <div class="flex items-center justify-end gap-4">
          <a href="iniciarSesion.html"
            class="rounded-xl bg-verde px-5 py-1 text-white hover:border hover:border-verde hover:bg-principal hover:text-verde">
            INICIAR SESIÓN
          </a>
          <ion-icon class="cursor-pointer text-3xl custom:hidden" id="menuToggle" name="menu"></ion-icon>
        </div>
      </div>
    </nav>
  </header>
  <div class="space-y-16">
    <div class="mt-8 flex flex-col justify-between gap-8 text-azul">
      <h1 class="text-center text-5xl font-bold">
        Registro de Egresado
      </h1>
    </div>

    <div
      class="flex flex-col justify-between gap-4 text-center sm:flex sm:flex-row sm:justify-around sm:gap-4 sm:text-center ">
      <section
        class="m-auto flex w-full flex-col justify-between gap-2 rounded-xl bg-principal px-4 py-2 drop-shadow-xl sm:flex sm:flex-col sm:justify-between lg:w-1/2 sm:gap-2 sm:w-2/3 ">
        <!-- <h3 class="text-2xl font-semibold">Ingresa tus datos para acceder</h3> -->
        <!-- <p class="max-w-xs text-lg leading-relaxed">
              Accede a estudiantes y egresados con habilidades frescas y
              potencial.
            </p> -->

        <form action="#" class="p-6 space-y-6 text-azul">
          <label for="" class="text-verde font-semibold text-xl">Información personal</label>
          <div class="grid grid-cols-6 gap-6">
            <div class="col-span-6 sm:col-span-3">
              <label for="nombre" class="text-sm font-medium block mb-2">Nombre</label>
              <input type="text" name="nombre" id="nombre"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Nombre" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="apellidos" class="text-sm font-medium block mb-2">Apellidos</label>
              <input type="text" name="apellidos" id="apellidos"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Apellidos" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="telefono" class="text-sm font-medium block mb-2">Teléfono</label>
              <input type="tel" name="telefono" id="telefono"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Teléfono" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="correo" class="text-sm font-medium block mb-2">Correo electrónico</label>
              <input type="email" name="correo" id="correo"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Correo" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="contraseña" class="text-sm font-medium block mb-2">Contraseña</label>
              <input type="password" name="contraseña" id="contraseña"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Contraseña" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="confirmar_contraseña" class="text-sm font-medium block mb-2">Confirmar contraseña</label>
              <input type="password" name="confirmar_contraseña" id="confirmar_contraseña"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Confirmar contraseña" required>
            </div>
          </div>
          <label for="" class="block text-xl text-verde font-semibold">Información académica y laboral</label>
          <div class="grid grid-cols-6 gap-6 pt-3">
            <div class="col-span-6 sm:col-span-3">
              <label for="institucion_academica" class="text-sm font-medium block mb-2">Institución Académica</label>
              <input type="text" name="institucion_academica" id="institucion_academica"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Institución Académica" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="carrera" class="text-sm font-medium block mb-2">Carrera o Especialidad</label>
              <input type="text" name="carrera" id="carrera"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Carrera o Especialidad" required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="fecha_egreso" class="text-sm font-medium block mb-2">Fecha de Egreso</label>
              <input type="date" name="fecha_egreso" id="fecha_egreso"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="area_interes_profesional" class="text-sm font-medium block mb-2">Área de Interés
                Profesional</label>
              <input type="text" name="area_interes_profesional" id="area_interes_profesional"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Área de Interés" required>
            </div>
            <div class="col-span-full">
              <label for="habilidades_clave" class="text-sm font-medium block mb-2">Habilidades Clave</label>
              <textarea id="habilidades_clave" name="habilidades_clave" rows="6"
                class="bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-4"
                placeholder="Habilidades Clave"></textarea>
            </div>
          </div>
          <label for="" class="block text-xl text-verde font-semibold text-center">Extras</label>
          <div class="grid grid-cols-6 gap-6 pt-3">
            <div class="col-span-6 sm:col-span-3">
              <label for="idiomas" class="text-sm font-medium block mb-2">Idiomas</label>
              <input type="text" name="idiomas" id="idiomas"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Idiomas que habla el solicitante." required>
            </div>
            <div class="col-span-6 sm:col-span-3">
              <label for="certificaciones" class="text-sm font-medium block mb-2">Certificaciones</label>
              <input type="text" name="certificaciones" id="certificaciones"
                class="shadow-sm bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-2.5"
                placeholder="Certificaciones con las que cuenta" required>
            </div>
            <div class="col-span-full">
              <label for="experiencia_laboral" class="text-sm font-medium block mb-2">Experiencia laboral</label>
              <textarea id="experiencia_laboral" name="experiencia_laboral" rows="6"
                class="bg-gray-50 border border-gray-300 sm:text-sm rounded-lg focus:ring-cyan-600 focus:border-cyan-600 outline-verde block w-full p-4"
                placeholder="Empresa, puesto, tiempo trabajando etc..."></textarea>
            </div>
          </div>

          <!-- Botón de envío -->
          <button type="submit"
            class="rounded-xl bg-verde px-5 py-1 text-white hover:border hover:border-verde hover:bg-principal hover:text-verde">
            Registrarse
          </button>
        </form>

    </div>

  </div>
  </form>
  </section>
  </div>
  </div>

  <footer
    class="mt-4 bg-gradient-to-b from-verde to-azul p-5 text-center text-white sm:relative sm:mt-8  lg:inset-x-0 lg:bottom-0">
    <div class="text-1xl">
      © 2024 Copyright:
      <a href="#" class="text-verde underline">KICR, IMO, MFLP, JELG, JUMJ</a>
    </div>
  </footer>

  <script type="module" src="./src/main.js"></script>
  <script>
    document.querySelector('form').addEventListener('submit', async function (e) {
      e.preventDefault();

      // Validar que las contraseñas coincidan
      const password = document.getElementById('contraseña').value;
      const confirmPassword = document.getElementById('confirmar_contraseña').value;

      if (password !== confirmPassword) {
        alert('Las contraseñas no coinciden');
        return;
      }

      // Crear objeto con los datos del formulario
      const formData = {
        nombre: document.getElementById('nombre').value,
        apellidos: document.getElementById('apellidos').value,
        telefono: document.getElementById('telefono').value,
        correo: document.getElementById('correo').value,
        contraseña: password,
        institucion_academica: document.getElementById('institucion_academica').value,
        carrera: document.getElementById('carrera').value,
        fecha_egreso: document.getElementById('fecha_egreso').value,
        area_interes_profesional: document.getElementById('area_interes_profesional').value,
        habilidades_clave: document.getElementById('habilidades_clave').value,
        experiencia_laboral: document.getElementById('experiencia_laboral').value,
        idiomas: document.getElementById('idiomas').value,
        certificaciones: document.getElementById('certificaciones').value
      };

      try {
        const response = await fetch('http://localhost:3000/api/usuario', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(formData)
        });

        if (response.ok) {
          alert('Registro exitoso');
          window.location.href = 'iniciarSesion.html';
        } else {
          const error = await response.json();
          alert('Error en el registro: ' + error.error);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('Error al conectar con el servidor: ' + error.message);
      }
    });
  </script>
</body>

</html>